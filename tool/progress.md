# Object files
Generated by the Make file on the repository, tried to keep the same compilation flags but some were giving error. Check the keil flangs and make file to determine the missing.

**startup_SSE310MPS3.c file is modified as *__set_MSPLIM* and *__set_PSPLIM* function were not recognized during compilation**



# Linking Object files:
1. Relace object files in Keil IDE with generated file from the previous step. **Could not find any command line option or linking option in Keil**

2. Link with gcc tool chain provided by ARM. Curretly getting errors of undefined reference. For linking stage also not all linker flags are included because of error. **Current command after running Make file:** ../../m85-toolchain/arm-gnu-toolchain-12.2.mpacbti-bet1-x86_64-arm-none-eabi/bin/arm-none-eabi-gcc -march=armv8.1-m.main -mcpu=Cortex-M85 -mfloat-abi=hard -mfpu=fpv5-d16 *.o -callgraph -o Blinky.axf -T linker_SSE310MPS3_secure.ld

3. Linking with clang is also failing: **Command:** clang -march=armv8.1-m.main -mcpu=Cortex-M85 -mfloat-abi=hard -mfpu=fpv5-d16 *.o -o Blinky.axf -T linker_SSE310MPS3_secure.ld 

# Build from source with ARM LLVM tool chain
We will be using the LLVM arm tool chain version 16.0.0, Link: https://github.com/ARM-software/LLVM-embedded-toolchain-for-Arm/tree/llvm-16
Follow the readme file and build from source markup files. Run the below commands to configure the environment.
The [generate_version_txt.cmake] (https://github.com/CactiLab/code-CFA-with-pac/LLVM_compiler/Environment-config/generate_version_txt.cmake) file has some issues when dowlaoded from release, We need to replace that file in directory: LLVM-embedded-toolchain-for-Arm-release-16.0.0/cmake

1. mkdir repos
2. git -C repos clone --branch llvmorg-16.0.0 https://github.com/llvm/llvm-project.git
3. git -C repos/llvm-project apply ../../patches/llvm-project.patch
4. git -C repos clone https://github.com/picolibc/picolibc.git && git -C repos/picolibc checkout 35c504ff6065b2a87ea8a106ae0d0d61d1e7ece5
5. git -C repos/picolibc apply ../../patches/picolibc.patch
6. mkdir build
7. cd build
8. cmake .. -GNinja -DFETCHCONTENT_SOURCE_DIR_LLVMPROJECT=../repos/llvm-project -DFETCHCONTENT_SOURCE_DIR_PICOLIBC=../repos/picolibc
9. ninja

# LLVM tool chain info
1. front end pass library directory after build: /home/tomal/llvm_all/llvm-arm-org/LLVM-embedded-toolchain-for-Arm-release-17.0.1/build/llvm/lib


# LLVM Tool commands
*LLVM object dump form cortex-m85 with pacbti:* `llvm-objdump --arch-name=arm --mcpu=cortex-m85 --mattr=+pacbti -d outm_passARM16.o`